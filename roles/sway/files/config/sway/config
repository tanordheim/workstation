# INSPIRATION:
#  - https://github.com/sarveshspatil111/i3wm-nord/blob/main/i3/config

# include $HOME/.config/i3/env-config

#
# Modifier key configuration
#
# Mod4 = Windows / Super key
# Mod1 = Alt
set $mod Mod4

#
# Movement keys
#
set $up k
set $down j
set $left h
set $right l

#
# Colors and layout
#
font "Noto Sans Mono" 10
for_window [title="^.*"] title_format ""
default_border pixel 4
default_floating_border pixel 4
gaps inner 10
smart_gaps on
smart_borders on

# Window color settings
# class                 border  backgr. text    indicator child_border
client.focused          #a89984 #a89984 #504945 #b8bb26   #a89984
client.focused_inactive #504945 #504945 #a89984 #98971a   #504945
client.unfocused        #282828 #282828 #928374 #98971a   #282828
client.urgent           #b16286 #b16286 #ebdbb2 #b8bb26   #b16286
client.placeholder      #1d2021 #1d2021 #504945 #b8bb26   #1d2021
client.background       #32302f

#
# Input configuration
#
input type:touchpad {
  dwt enabled
  tap enabled
  tap_button_map lrm
}

input type:keyboard {
  xkb_layout "no"
  xkb_options "caps:escape"
}

#
# Application auto-start
#
#

# run polybar as a i3 bar replacement.
# exec_always $HOME/.config/polybar/launch.sh

# automatically adjust monitor configuration and layout.
# exec_always autorandr --change --force

# run startup-applications (xdg autostart)
# exec dex --autostart --environment i3

# run i3lock before suspend
# exec xss-lock --transfer-sleep-lock -- i3lock --nofork

# run network-manager applet
#exec nm-applet

# run picom for compositing
# exec_always picom --config $HOME/.config/picom/picom.conf

# run dunst for notifications
exec dunst -config $HOME/.config/dunst/dunstrc

# run gammastep to do screen temperature adjustment based on time of day.
exec gammastep

#
# Application shortcuts
#
bindsym $mod+d exec wofi --show=drun --prompt=""
bindsym $mod+Return exec alacritty
bindsym $mod+p exec grim -o "$(swaymsg -t get_outputs | jq -r '.[] | select(.focused) | .name')" - | wl-copy
bindsym $mod+Shift+p exec grim -g "$(slurp -d)" - | wl-copy
#bindsym XF86AudioLowerVolume exec /home/trond/.local/bin/change-audio-volume -5
#bindsym XF86AudioRaiseVolume exec /home/trond/.local/bin/change-audio-volume +5
#bindsym XF86AudioMute exec /home/trond/.local/bin/toggle-audio-mute
#bindsym XF86AudioMicMute exec /home/trond/.local/bin/toggle-microphone-mute
#bindsym XF86MonBrightnessDown exec /home/trond/.local/bin/change-display-brightness 5%-
#bindsym XF86MonBrightnessUp exec /home/trond/.local/bin/change-display-brightness +5%

# audio
#bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +10%
#bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -10%
#bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
#bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

#
# Configure outputs and workspaces
#
exec_always $HOME/.config/kanshi/launch.sh
include $HOME/.config/sway/config-outputs-current
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10

workspace $ws1 output $primary_output
workspace $ws2 output $primary_output
workspace $ws3 output $primary_output
workspace $ws4 output $primary_output
workspace $ws5 output $primary_output
workspace $ws6 output $primary_output
workspace $ws7 output $primary_output
workspace $ws8 output $primary_output
workspace $ws9 output $primary_output
workspace $ws10 output $secondary_output

output * bg $HOME/wallpapers/skeleton-using-pc.jpg fill

#
# Default workspaces for apps
#
assign [app_id="telegramdesktop"] $ws10
assign [class="Slack"] $ws10

#
# Workspace switching
#
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

#
# Move containers between workspaces
#
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

#
# Move workspaces between monitors
#
bindsym $mod+Control+Shift+Right move workspace to output right
bindsym $mod+Control+Shift+Left move workspace to output left

#
# Container focus switching
#
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
focus_follows_mouse no

#
# Container movement/arrangement
#
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# click+drag containers/windows
floating_modifier $mod normal

#
# Container layout
#
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

#
# Scratchpad
#
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

#
# Tiling
#
default_orientation horizontal
bindsym $mod+b split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent

#
# Resizing of containers
#
mode "resize" {
  bindsym $left resize shrink width 10 px or 10 ppt
  bindsym $down resize grow height 10 px or 10 ppt
  bindsym $up resize shrink height 10 px or 10 ppt
  bindsym $right resize grow width 10 px or 10 ppt

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

#
# Configuration and session management
#
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec swaynag \
  -f 'Noto Sans Mono 10' \
  --background 1d2021 \
  --text d5c4a1 \
  --border a89984 \
  --border-bottom d65d0e \
  --button-background 504945 \
  --button-text d5c4a1 \
  --button-padding 3 \
  --button-dismiss-gap 0 \
  -t warning \
  -m 'Do you really want to exit Sway?' \
  -s 'No' \
  -b 'Yes, exit sway' \
  'swaymsg exit'
bindsym $mod+Shift+q kill

#
# Status bar
#
bar {
  swaybar_command waybar
}

#
# Enable xwayland for legacy apps
#
xwayland enable

#
# Include systemwide Sway configuration
#
include /etc/sway/config.d/*
